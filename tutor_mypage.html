<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>컨설턴트 페이지 - StudyCrack</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/mypage.css"> <link rel="stylesheet" href="css/tutor_mypage.css"> <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <script src="https://sdk.amazonaws.com/js/aws-sdk-2.1390.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/amazon-cognito-identity-js@6.3.3/dist/amazon-cognito-identity.min.js"></script>
</head>
<body>

    <header>
        <div class="logo-container">
            <a href="index.html" style="display: flex; align-items: center; gap: 10px;">
                <span class="logo">StudyCrack <span style="font-size:0.8rem; color:#3b82f6;">Partner</span></span>
            </a>
        </div>
        <nav class="nav-links">
            <a href="#" onclick="handleSignOut()" class="nav-btn">로그아웃</a>
        </nav>
    </header>

    <div class="mypage-container">
        
        <aside class="profile-summary">
            <div class="profile-pic-area">
                <img src="https://placehold.co/150x150?text=Tutor" 
                     onerror="this.src='assets/images/sample_profile.png'" 
                     alt="프로필" class="profile-img" id="tutorProfileImg">
                <button class="edit-pic-btn" onclick="alert('준비 중인 기능입니다.')">+</button>
            </div>
            
            <h2 id="userNameDisplay">-</h2>
            <p id="userEmailDisplay" style="font-size:0.9rem; color:#64748b;">-</p>
            <div class="tutor-badge">CONSULTANT</div>
        </aside>

        <main class="content-area">
            <div class="main-tabs">
                <button class="tab-btn active" onclick="switchTab('info')">내 정보 관리</button>
                <button class="tab-btn" onclick="switchTab('intro')">소개 및 칼럼</button>
                <button class="tab-btn" onclick="switchTab('students')">담당 학생 관리</button>
            </div>

            <div id="tab-info" class="tab-content active">
                <div class="content-header">
                    <h2>내 정보 관리</h2>
                    <p>개인정보 및 계정 설정을 변경할 수 있습니다.</p>
                </div>
                <div class="form-container">
                    <h3>기본 인적사항</h3>
                    <div class="form-group">
                        <label>이름 <span style="font-size:0.8rem; color:#ef4444;">(수정 불가)</span></label>
                        <input type="text" id="profileName" disabled style="background:#f1f5f9; cursor:not-allowed;">
                    </div>
                    <div class="form-group"><label>전화번호</label><input type="tel" id="profilePhone"></div>
                    
                    <h3>계정 정보 변경</h3>
                    <div class="form-group"><label>이메일</label><input type="email" id="profileEmail"></div>
                    <div class="password-section">
                        <div class="form-group"><label>새 비밀번호</label><input type="password" id="newPassword" placeholder="변경 시에만 입력"></div>
                        <div class="form-group"><label>새 비밀번호 확인</label><input type="password" id="newPasswordConfirm" placeholder="비밀번호 재입력"></div>
                    </div>
                    <button class="save-btn" onclick="saveTutorProfile()">정보 수정 저장</button>
                </div>
            </div>

            <div id="tab-intro" class="tab-content">
                <div class="content-header">
                    <h2>프로필 관리</h2>
                    <p>학생들에게 보여질 소개글과 칼럼을 관리합니다.</p>
                </div>

                <div class="tutor-intro-box">
                    <h3>약력 및 자기소개</h3>
                    <textarea id="tutorBio" placeholder="약력과 자기소개를 입력해주세요. (예: 서울대 경영학과 졸업, 대치동 5년 경력 등)" rows="5"></textarea>
                    <div style="text-align:right; margin-top:10px;">
                        <button class="small-btn" onclick="saveTutorBio()">소개 저장</button>
                    </div>
                </div>

                <hr class="divider">

                <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:20px;">
                    <h3>내가 쓴 칼럼</h3>
                    <button class="small-btn blue-btn" onclick="openColumnModal()">+ 새 칼럼 작성</button>
                </div>

                <div class="column-list" id="myColumnList">
                    <div class="empty-msg">등록된 칼럼이 없습니다.</div>
                </div>
            </div>

            <div id="tab-students" class="tab-content">
                <div class="content-header">
                    <h2>담당 학생 리스트</h2>
                    <p>배정된 학생들의 학습 현황을 확인합니다.</p>
                </div>
                
                <div class="table-responsive">
                    <table class="student-table">
                        <thead>
                            <tr>
                                <th>이름</th>
                                <th>학교</th>
                                <th>연락처</th>
                                <th>최근 접속</th>
                                <th>관리</th>
                            </tr>
                        </thead>
                        <tbody id="myStudentListBody">
                            <tr><td colspan="5" class="empty-msg">학생 데이터를 불러오는 중...</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>

        </main>
    </div>

    <div id="column-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>새 칼럼 작성</h2>
                <span class="close-btn" onclick="closeModal('column')">&times;</span>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>제목</label>
                    <input type="text" id="colTitle" placeholder="제목을 입력하세요">
                </div>
                <div class="form-group">
                    <label>내용</label>
                    <textarea id="colContent" rows="10" placeholder="내용을 입력하세요"></textarea>
                </div>
                <button class="save-btn" onclick="submitColumn()">등록하기</button>
            </div>
        </div>
    </div>

    <script src="js/config.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/tutor_mypage.js"></script>
</body>
</html>