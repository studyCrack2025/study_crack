<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>마이페이지 - 스터디크랙</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/mypage.css">
    <script src="https://sdk.amazonaws.com/js/aws-sdk-2.1390.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/amazon-cognito-identity-js@6.3.3/dist/amazon-cognito-identity.min.js"></script>
</head>
<body>
    <header>
        <div class="logo-container">
            <a href="index.html" style="display: flex; align-items: center; gap: 10px;">
                <span class="logo">StudyCrack</span>
            </a>
        </div>
        <nav class="nav-links">
            <a href="#" onclick="handleSignOut()" class="nav-btn">로그아웃</a>
        </nav>
    </header>

    <div class="mypage-container">
        <aside class="profile-summary">
            <div class="profile-pic-area">
                <img src="https://via.placeholder.com/150" 
                     onerror="this.src='assets/images/sample_profile.png'" 
                     alt="프로필" class="profile-img">
                <button class="edit-pic-btn" onclick="alert('준비 중인 기능입니다.')">+</button>
            </div>
            
            <h2 id="userNameDisplay">-</h2>
            <p id="userEmailDisplay">-</p>
            
            <div class="survey-status-box">
                <h4>기초조사서 상태</h4>
                <div id="statusBadge" class="status-badge incomplete">로딩 중...</div>
                <ul class="status-detail">
                    <li>정성 데이터: <span id="qualStatus">-</span></li>
                    <li>정량 데이터: <span id="quanStatus">-</span></li>
                </ul>
                <a href="survey.html" class="btn-go-survey">📝 기초조사서 작성/수정하러 가기</a>
            </div>
            
            <div class="account-actions">
                <button onclick="handleDeleteAccount()" class="btn-delete-account">회원 탈퇴</button>
            </div>
        </aside>

        <main class="content-area">
            <div class="content-header">
                <h2>내 정보 관리</h2>
                <p>개인정보 및 계정 설정을 변경할 수 있습니다.</p>
            </div>

            <div class="form-container">
                <h3>기본 인적사항</h3>
                <div class="form-group">
                    <label>이름</label>
                    <input type="text" id="profileName">
                </div>
                <div class="form-group">
                    <label>전화번호</label>
                    <input type="tel" id="profilePhone">
                </div>
                <div class="form-group">
                    <label>학교</label>
                    <input type="text" id="profileSchool">
                </div>

                <h3>계정 정보 변경</h3>
                <div class="form-group">
                    <label>이메일</label>
                    <input type="email" id="profileEmail" placeholder="변경할 이메일 주소">
                </div>
                
                <div class="password-section">
                    <div class="form-group">
                        <label>새 비밀번호</label>
                        <input type="password" id="newPassword" placeholder="변경 시에만 입력">
                    </div>
                    <div class="form-group">
                        <label>새 비밀번호 확인</label>
                        <input type="password" id="newPasswordConfirm" placeholder="비밀번호 재입력">
                    </div>
                </div>

                <button class="save-btn" onclick="saveProfile()">회원 정보 수정 저장</button>
            </div>
        </main>
    </div>

    <script src="js/config.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/mypage.js"></script>
</body>
</html>