<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>학생 상세 관리 - StudyCrack Admin</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/admin.css">
    <link rel="stylesheet" href="css/admin_detail.css">
</head>
<body>

    <div class="admin-header-bar">
        <div class="header-title">
            <span>🔒 학생 상세 관리</span>
        </div>
        <a href="admin.html" class="back-btn">← 목록으로</a>
    </div>

    <div class="detail-container">
        
        <aside class="profile-card">
            <img src="assets/images/sample_profile.png" alt="프로필" class="profile-img">
            <h2 id="viewName" class="profile-name">로딩중...</h2>
            <p id="viewEmail" class="profile-email">-</p>
            
            <div id="tierBadgeArea"></div>
            
            <div class="analysis-status-box">
                <span class="status-label">분석 리포트 상태</span>
                <div id="analysisStatusBadge" class="analysis-badge pending">⏳ 분석 대기중</div>
            </div>
        </aside>

        <main class="main-content-area">
            
            <div class="memo-card">
                <div class="memo-header">
                    <h3>📝 관리자 메모 <small>(학생 비공개)</small></h3>
                </div>
                <textarea id="adminMemoInput" class="memo-input" placeholder="상담 기록이나 특이사항을 작성하세요."></textarea>
                <div class="memo-actions">
                    <button onclick="saveAdminMemo()" class="memo-btn">저장</button>
                </div>
            </div>

            <div class="tab-card">
                <div class="tabs">
                    <button class="tab-btn active" onclick="switchTab('info')">기본 정보</button>
                    <button class="tab-btn" onclick="switchTab('qual')">정성 조사서</button>
                    <button class="tab-btn" onclick="switchTab('quan')">성적표</button>
                    <button class="tab-btn" onclick="switchTab('pay')">결제 내역</button>
                    <button class="tab-btn highlight" onclick="switchTab('analysis')">📊 입시 분석</button>
                </div>

                <div id="tab_info" class="tab-content active">
                    <div class="info-dashboard-grid">
                        <div class="info-dash-card">
                            <div class="dash-icon">🏫</div>
                            <div class="dash-content">
                                <span class="dash-label">소속 학교</span>
                                <span class="dash-value" id="viewSchool">-</span>
                            </div>
                        </div>
                        <div class="info-dash-card">
                            <div class="dash-icon">📞</div>
                            <div class="dash-content">
                                <span class="dash-label">전화번호</span>
                                <span class="dash-value" id="viewPhone">-</span>
                            </div>
                        </div>
                        <div class="info-dash-card">
                            <div class="dash-icon">📧</div>
                            <div class="dash-content">
                                <span class="dash-label">이메일 계정</span>
                                <span class="dash-value" id="viewEmailFull">-</span>
                            </div>
                        </div>
                        <div class="info-dash-card">
                            <div class="dash-icon">📅</div>
                            <div class="dash-content">
                                <span class="dash-label">가입 일자</span>
                                <span class="dash-value" id="viewJoinDate">-</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="tab_qual" class="tab-content">
                    <div id="qualContentArea">
                        <p class="no-data-msg">데이터가 없습니다.</p>
                    </div>
                </div>

                <div id="tab_quan" class="tab-content">
                    <div id="viewScoreTable">
                        <p class="no-data-msg">데이터가 없습니다.</p>
                    </div>
                </div>

                <div id="tab_pay" class="tab-content">
                    <div class="payment-table-wrapper">
                        <table class="payment-history-table">
                            <thead>
                                <tr>
                                    <th>결제 일시</th>
                                    <th>상품명 (티어)</th>
                                    <th>결제 금액</th>
                                    <th>상태</th>
                                </tr>
                            </thead>
                            <tbody id="viewPaymentList">
                                </tbody>
                        </table>
                    </div>
                </div>

                <div id="tab_analysis" class="tab-content">
                    <div class="analysis-header">
                        <h3>종합 분석 리포트 작성</h3>
                        <span class="analysis-guide">※ 저장 시 학생에게 '분석 완료' 알림이 전송됩니다.</span>
                    </div>
                    <textarea id="analysisEditor" class="analysis-editor" placeholder="분석 내용을 작성하세요..."></textarea>
                    <button onclick="saveAnalysis()" class="save-analysis-btn">✅ 분석 완료 및 리포트 저장</button>
                </div>
            </div>
        </main>
    </div>

    <script src="js/config.js"></script>
    <script src="js/admin_detail.js"></script>
</body>
</html>